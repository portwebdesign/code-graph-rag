FF..FFFF..FFFFFFFFFFFF....                                               [100%]
================================== FAILURES ===================================
____________________ test_sprint1_components_work_together ____________________
codebase_rag\tests\integration\e2e\test_sprint1_integration.py:37: in test_sprint1_components_work_together
    assert tools
E   assert {}
_________ TestMCPToolsIntegration.test_list_directory_works[asyncio] __________
codebase_rag\tests\integration\mcp\test_mcp_tools_integration.py:106: in test_list_directory_works
    assert "sample.py" in result
E   AssertionError: assert 'sample.py' in '.env\n.env.example\n.git\n.github\n.gitignore\n.gitmodules\n.idea\n.pre-commit-config.yaml\n.pypi_cache.json\n.pytest...txt\nTODO.md\nupstream-diff-stat.txt\nupstream-log.txt\nupstream-test-diff.txt\nuv.lock\nvertex-patch.txt\n__pycache__'
__________ TestListDirectoryBasic.test_list_root_directory[asyncio] ___________
codebase_rag\tests\unit\mcp\test_mcp_list_directory.py:63: in test_list_root_directory
    assert "file1.txt" in result
E   AssertionError: assert 'file1.txt' in 'Error: Target repository path does not exist: D:\\PROGRAMMING\\code-graph-rag\\<pytest_fixture(<function temp_project_root at 0x0000016D0175B740>)>'
___________ TestListDirectoryBasic.test_list_subdirectory[asyncio] ____________
codebase_rag\tests\unit\mcp\test_mcp_list_directory.py:76: in test_list_subdirectory
    assert "nested" in result
E   AssertionError: assert 'nested' in 'Error: Target repository path does not exist: D:\\PROGRAMMING\\code-graph-rag\\<pytest_fixture(<function temp_project_root at 0x0000016D0175B740>)>'
_________ TestListDirectoryBasic.test_list_nested_directory[asyncio] __________
codebase_rag\tests\unit\mcp\test_mcp_list_directory.py:87: in test_list_nested_directory
    assert "nested_file.txt" in result
E   AssertionError: assert 'nested_file.txt' in 'Error: Target repository path does not exist: D:\\PROGRAMMING\\code-graph-rag\\<pytest_fixture(<function temp_project_root at 0x0000016D0175B740>)>'
___ TestListDirectoryEdgeCases.test_list_file_instead_of_directory[asyncio] ___
codebase_rag\tests\unit\mcp\test_mcp_list_directory.py:120: in test_list_file_instead_of_directory
    assert "not a valid directory" in result
E   AssertionError: assert 'not a valid directory' in 'Error: Target repository path does not exist: D:\\PROGRAMMING\\code-graph-rag\\<pytest_fixture(<function temp_project_root at 0x0000016D0175B740>)>'
_____ TestListDirectoryPathHandling.test_list_with_relative_path[asyncio] _____
codebase_rag\tests\unit\mcp\test_mcp_list_directory.py:160: in test_list_with_relative_path
    assert "nested" in result
E   AssertionError: assert 'nested' in 'Error: Target repository path does not exist: D:\\PROGRAMMING\\code-graph-rag\\<pytest_fixture(<function temp_project_root at 0x0000016D0175B740>)>'
_ TestListDirectoryOutput.test_output_contains_only_names_not_paths[asyncio] __
codebase_rag\tests\unit\mcp\test_mcp_list_directory.py:198: in test_output_contains_only_names_not_paths
    assert "nested" in result
E   AssertionError: assert 'nested' in 'Error: Target repository path does not exist: D:\\PROGRAMMING\\code-graph-rag\\<pytest_fixture(<function temp_project_root at 0x0000016D0175B740>)>'
_________ TestIndexRepository.test_index_repository_success[asyncio] __________
codebase_rag\tests\unit\mcp\test_mcp_query_and_index.py:228: in test_index_repository_success
    result = await mcp_registry.index_repository()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MCPToolsRegistry.index_repository() missing 1 required positional argument: 'repo_path'
__ TestIndexRepository.test_index_repository_creates_graph_updater[asyncio] ___
codebase_rag\tests\unit\mcp\test_mcp_query_and_index.py:244: in test_index_repository_creates_graph_updater
    await mcp_registry.index_repository()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MCPToolsRegistry.index_repository() missing 1 required positional argument: 'repo_path'
______ TestIndexRepository.test_index_repository_handles_errors[asyncio] ______
codebase_rag\tests\unit\mcp\test_mcp_query_and_index.py:262: in test_index_repository_handles_errors
    result = await mcp_registry.index_repository()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MCPToolsRegistry.index_repository() missing 1 required positional argument: 'repo_path'
___ TestIndexRepository.test_index_repository_with_empty_directory[asyncio] ___
codebase_rag\tests\unit\mcp\test_mcp_query_and_index.py:282: in test_index_repository_with_empty_directory
    result = await empty_registry.index_repository()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MCPToolsRegistry.index_repository() missing 1 required positional argument: 'repo_path'
______ TestIndexRepository.test_index_repository_multiple_times[asyncio] ______
codebase_rag\tests\unit\mcp\test_mcp_query_and_index.py:295: in test_index_repository_multiple_times
    result1 = await mcp_registry.index_repository()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MCPToolsRegistry.index_repository() missing 1 required positional argument: 'repo_path'
_ TestIndexRepository.test_index_repository_clears_project_data_first[asyncio] _
codebase_rag\tests\unit\mcp\test_mcp_query_and_index.py:312: in test_index_repository_clears_project_data_first
    result = await mcp_registry.index_repository()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MCPToolsRegistry.index_repository() missing 1 required positional argument: 'repo_path'
_ TestIndexRepository.test_index_repository_deletes_project_before_updater_runs[asyncio] _
codebase_rag\tests\unit\mcp\test_mcp_query_and_index.py:337: in test_index_repository_deletes_project_before_updater_runs
    await mcp_registry.index_repository()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MCPToolsRegistry.index_repository() missing 1 required positional argument: 'repo_path'
_ TestIndexRepository.test_sequential_index_only_clears_own_project_data[asyncio] _
codebase_rag\tests\unit\mcp\test_mcp_query_and_index.py:368: in test_sequential_index_only_clears_own_project_data
    await registry1.index_repository()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MCPToolsRegistry.index_repository() missing 1 required positional argument: 'repo_path'
________ TestQueryAndIndexIntegration.test_query_after_index[asyncio] _________
codebase_rag\tests\unit\mcp\test_mcp_query_and_index.py:389: in test_query_after_index
    index_result = await mcp_registry.index_repository()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MCPToolsRegistry.index_repository() missing 1 required positional argument: 'repo_path'
_____ TestQueryAndIndexIntegration.test_index_and_query_workflow[asyncio] _____
codebase_rag\tests\unit\mcp\test_mcp_query_and_index.py:414: in test_index_and_query_workflow
    await mcp_registry.index_repository()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MCPToolsRegistry.index_repository() missing 1 required positional argument: 'repo_path'
============================== warnings summary ===============================
codebase_rag/tests/integration/mcp/test_mcp_tools_integration.py: 3 warnings
codebase_rag/tests/unit/mcp/test_mcp_list_directory.py: 18 warnings
codebase_rag/tests/unit/mcp/test_mcp_query_and_index.py: 24 warnings
  D:\PROGRAMMING\code-graph-rag\codebase_rag\infrastructure\parser_loader.py:477: DeprecationWarning: int argument support is deprecated
    language = Language(lang_obj)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED codebase_rag/tests/integration/e2e/test_sprint1_integration.py::test_sprint1_components_work_together
FAILED codebase_rag/tests/integration/mcp/test_mcp_tools_integration.py::TestMCPToolsIntegration::test_list_directory_works[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_list_directory.py::TestListDirectoryBasic::test_list_root_directory[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_list_directory.py::TestListDirectoryBasic::test_list_subdirectory[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_list_directory.py::TestListDirectoryBasic::test_list_nested_directory[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_list_directory.py::TestListDirectoryEdgeCases::test_list_file_instead_of_directory[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_list_directory.py::TestListDirectoryPathHandling::test_list_with_relative_path[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_list_directory.py::TestListDirectoryOutput::test_output_contains_only_names_not_paths[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_query_and_index.py::TestIndexRepository::test_index_repository_success[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_query_and_index.py::TestIndexRepository::test_index_repository_creates_graph_updater[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_query_and_index.py::TestIndexRepository::test_index_repository_handles_errors[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_query_and_index.py::TestIndexRepository::test_index_repository_with_empty_directory[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_query_and_index.py::TestIndexRepository::test_index_repository_multiple_times[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_query_and_index.py::TestIndexRepository::test_index_repository_clears_project_data_first[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_query_and_index.py::TestIndexRepository::test_index_repository_deletes_project_before_updater_runs[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_query_and_index.py::TestIndexRepository::test_sequential_index_only_clears_own_project_data[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_query_and_index.py::TestQueryAndIndexIntegration::test_query_after_index[asyncio]
FAILED codebase_rag/tests/unit/mcp/test_mcp_query_and_index.py::TestQueryAndIndexIntegration::test_index_and_query_workflow[asyncio]
18 failed, 8 passed, 26 deselected, 45 warnings in 65.00s (0:01:05)
